<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "load SVG error";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Talking Cartoon Boy Avatar with External SVG Files</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; background: #f0f0f0; }
        .avatar-container { margin: 20px; }
        .avatar { width: 520px; height: 610px; }
        textarea { width: 300px; height: 100px; margin: 10px; }
        button { padding: 10px 20px; margin: 5px; cursor: pointer; }
        select, input[type="file"] { margin: 10px; padding: 5px; }
        h1, h2 { color: #333; }
        p { max-width: 500px; margin: 10px auto; }
        #mouth path { transition: opacity 0.05s ease; }
    </style>
</head>
<body>
    <h1>Talking Cartoon Boy Avatar</h1>
    <div class="avatar-container">
        <h2 id="avatar-name">Boy 1 (Spiky Hair)</h2>
       <svg id="avatar" class="avatar"
   viewBox="731 491 2534 3013"
   height="607"
   width="512"
   xmlns="http://www.w3.org/2000/svg">
  <path
     d="m 1677.0296,503.79779 c 16.4,12 23.1,33.5 27.3,52.5 l 0.5,2.1 a 265,265 0 0 1 3.7,52.6 v 3.8 c -0.2,56.4 -10,112.1 -21,167.3 q -2,9.5 -3.4,18.9 l 1.7,-0.8 a 936,936 0 0 1 62.3,-25.2 l 2.1,-0.8 c 48.1,-18 97.8,-31.4 147.9,-42.2 l 2.7,-0.6 a 1357,1357 0 0 1 84,-15.2 c 28.2,-4.4 28.2,-4.4 42.3,-5.7 l 9.6,-1.5 a 257,257 0 0 1 24.8,-2.8 4544,4544 0 0 1 73.3,-6 l 2.5,-0.2 19.2,-1.1 c 20.7,-1.3 41.5,-1 62.2,-1 h 15.8 a 1381,1381 0 0 1 111.7,3.6 q 6,0.3 11.9,1.5 l 8.2,0.7 2.4,0.2 17.2,1.4 2.3,0.2 q 5.5,0.4 10.9,1.5 l 6.6,0.6 4,0.4 2,0.2 c 10.7,1 21.3,2 31.8,4 q 7.3,1.3 14.6,2.1 a 963,963 0 0 1 39.6,6.3 c 95.4,16.6 190.3,42.5 347,115.3 l 6.8,3.2 c 72.7,35.7 72.7,35.7 82.8,64.2 a 49,49 0 0 1 -4.9,36.5 c -19.9,28.9 -56.3,44 -87.3,57.3 l -5.6,2.5 c -20.4,9.20001 -41.7,16.80001 -62.8,24.50001 l -22.8,8.5 -2.7,1 c -4.1,1.6 -4.1,1.6 -8.1,3.3999 l 8.2,6.4 2.5,2 14,10.7 a 840,840 0 0 1 25.3,20.3 949,949 0 0 1 44,38.1 1103,1103 0 0 1 28.8,26.2 1014,1014 0 0 1 58.7,58.8 182,182 0 0 1 10.7,11.4 l 6.7,7.4 q 6,6.7 11.7,13.8 l 8.3,9.7 q 7.4,8.7 14.3,17.7 l 7,8.8 a 834,834 0 0 1 26.3,34.4 1385,1385 0 0 1 39.8,57 l 1.6,2.5 q 16.3,24.3 31.3,49.2 l 1.1,1.8 a 1442,1442 0 0 1 25.7,44.3 1381,1381 0 0 1 27.4,51 903,903 0 0 1 36.9,75.6 930,930 0 0 1 32.5,78.1 1346,1346 0 0 1 53.5,189.7 q 4.7,21.3 8.6,42.8 l 0.7,3.5 a 57,57 0 0 1 -5,40.3 40,40 0 0 1 -23.6,16.5 c -44,2.6 -76.2,-26 -107.2,-53.4 l -12,-11 -6.8,-6.1 -12,-10.8 -15,-13.7 -0.3,2.4 q -7.3,54.6 -19.5,108.3 l -0.7,3.1 a 472,472 0 0 1 -7.6,30.3 q -1.6,5.2 -2.8,10.3 c -17.5,70.3 -45.2,180.7 -97.1,232.6 l -0.6,5.6 -0.2,3 -0.2,2.4 2.4,-0.1 c 16.4,-0.4 32,2.9 47.6,8.1 l 2.3,0.8 c 28.7,9.6 52.3,26.5 74.3,47 l 2,1.8 q 6.5,6.3 12.4,13.4 l 1.6,1.9 c 52.1,61.4 74.6,158.6 69.2,238.1 a 336,336 0 0 1 -72.8,182 l -2.2,2.7 -6.8,8.3 -1.4,1.6 a 255,255 0 0 1 -38,38.3 l -7,6 a 372,372 0 0 1 -84.6,54.1 l -2.4,1.1 c -19.9,9.4 -40,17.8 -61,24 l -2,0.6 a 99,99 0 0 1 -22.6,4.3 l -0.5,2 q -2.5,9.6 -5.8,19 l -0.9,2.7 -3,9 -1.1,3.1 a 1381,1381 0 0 1 -37.7,98.2 l -0.8,1.9 q -7.4,17.8 -16.2,35.1 -3.5,7 -6.9,14.3 -6.5,13.7 -13.7,27 l -4.7,8.9 a 827,827 0 0 1 -23.7,41.8 l -1.7,2.8 a 783,783 0 0 1 -58.3,84.2 l -1.6,2 a 686,686 0 0 1 -33.7,39.6 q -8.7,9.9 -18.2,19 l -5.8,5.9 q -9,9.1 -18.7,17.5 l -5.1,4.8 q -7.9,7 -16.2,13.4 -4.6,3.4 -9.1,7.2 a 630,630 0 0 1 -160.6,91.6 l -2.4,1 a 852,852 0 0 1 -257.9,57.8 l -9.4,0.7 a 929,929 0 0 1 -69.5,1.8 h -16.3 a 1516,1516 0 0 1 -115,-4 l -3.5,-0.3 q -27.8,-2 -55.3,-5 l -3.4,-0.4 q -21.1,-2.4 -42.3,-5.6 l -2.2,-0.3 c -83.2,-12.6 -167.2,-36 -241.4,-76.4 l -7.6,-4 a 598,598 0 0 1 -44.9,-26.9 817,817 0 0 1 -43.9,-30.4 l -2.4,-1.8 a 892,892 0 0 1 -74.7,-61.3 l -5.5,-5 q -7.7,-6.9 -15,-14.3 l -2.7,-2.8 q -7,-6.7 -13.1,-14 l -7.5,-8.1 a 267,267 0 0 1 -18,-21.3 564,564 0 0 1 -46.1001,-66.4 l -1.2,-2 -7.8,-13 -1.6,-2.7 a 855,855 0 0 1 -61.4,-127.3 l -1.2,-3 a 1127,1127 0 0 1 -31.8,-92 l -1.9,0.2 c -41.4,5.3 -85.7,10.8 -127.1,2.8 l -3.1,-0.6 a 232,232 0 0 1 -119.59999,-61.6 q -7.1,-6.4 -13.9,-13.2 l -2.4,-2.5 c -48,-48.1 -76.5,-112.5 -87,-179.1 l -0.5,-3.3 q -1.9,-11.9 -3.5,-23.7 l -0.4,-2.7 a 280,280 0 0 1 61.4,-212.3 l 2.3,-2.9 a 232,232 0 0 1 41.2,-40 c 19.6,-16.1 41.99999,-30.2 65.49999,-40.1 a 58,58 0 0 0 -7.6,-14.2 l -1,-1.8 a 935,935 0 0 1 -23.39999,-40 l -1.6,-3 a 644,644 0 0 1 -40.4,-84 l -1.4,-3.6 a 734,734 0 0 1 -37.6,-152.4 l -0.3,-2.3 q -1.8,-12.6 -2.5,-25.1 c -0.1,-3.5 -0.1,-3.5 -0.7,-6.4 -1,-5.8 -1.1,-11.6 -1.5,-17.4 l -0.2,-3.7 -0.8,-13.1 -0.1,-2.7 c -1.1,-21.1 -1,-42.3 -1,-63.5 v -15 q -0.2,-34 1.1,-67.8 l -2,2.2 q -10.9,12 -22.5,23.2 -6.7,6.7 -12.9,13.8 a 97,97 0 0 1 -8,7.7 279,279 0 0 0 -11.4,11 227,227 0 0 1 -38.9,31.2 c -15.3,10 -31.5,16.5 -50.2,13.4 a 44,44 0 0 1 -25.5,-17.6 80,80 0 0 1 -8.2,-40.7 v -2.5 a 180,180 0 0 1 6.7,-47.4 q 14.1,-60.1 34.9,-118.3 l 0.7,-2 a 1257,1257 0 0 1 82.4,-180.8 932,932 0 0 1 22.7,-40 l 8.7,-14.6 1,-1.9 q 10.1,-17.3 21,-34.3 l 7,-11.2 a 1732,1732 0 0 1 33.3,-51.7 l 1.4,-2 a 2020,2020 0 0 1 107.99999,-150.2 l 4.4,-5.2 a 57,57 0 0 0 13.2,-27.1 q 1.6,-6.7 3.4,-13.3 l 0.7,-2.7 q 3.5,-13.5 7.8,-26.6 l 0.8,-2.2 a 991,991 0 0 1 45.5,-112.1999 l 1.4,-3 a 747,747 0 0 1 42.6,-77.70001 862,862 0 0 1 25.1,-40 866,866 0 0 1 53.6,-73.7 l 5,-6.4 a 544,544 0 0 1 38.8,-45.2 c 14.8,-16.5 14.8,-16.5 22.2,-23.7 l 5.3,-5.7 q 7.3,-8.2 15.2,-16 l 5.2,-5.1 q 7.7001,-7.9 15.9001,-15 4.3,-3.9 8.2,-8 6,-6.2 12.4,-11.7 5.2,-4.6 10.1,-9.3 a 441,441 0 0 1 20.8,-18.9 q 6.7,-6 13.5,-11.4 3.8,-3 7.5,-6.6 6.6,-6 13.8,-11.4 6,-4.6 11.7,-9.6 8.4,-7 17.3,-13.7 7.2,-5.5 14.2,-11.1 7.8,-6.2 15.7,-12.2 l 11.1,-8.4 q 11,-8.4 22,-16.4 l 15.2,-11.1 a 1291,1291 0 0 1 30.4,-22.3 c 57.5,-41.3 57.5,-41.3 89.7,-21.6"
     fill="#3c484d"
     data-index="1"
     style="opacity:1"
     id="path1" />
  <path
     d="m 1294.1295,1646.9977 c 3.8,1.4 7.4,3.1667 10.8,5.3 l 1.7,1 c 15.525,9.0233 30.9264,18.2575 46.2001,27.7 l 9.3,5.7 c 25.5692,15.4527 50.9054,31.2879 76,47.5 l 3,2 c 10.1279,6.4892 20.1622,13.1232 30.1,19.9 l 12.6,8.3 c 8.4667,5.5333 16.8,11.3 25,17.3 l 14.5,10 c 12.0146,8.3134 23.8506,16.882 35.5,25.7 26.265,19.2118 52.0399,39.0848 77.3,59.6 3.6667,3.1333 7.4333,6.2 11.3,9.2 4.3333,3.4667 8.6,7.0333 12.8,10.7 l 10.4,8.5 c 5.3333,4.4667 10.5,9.0667 15.5,13.8 2.2667,2.1333 4.5667,4.2 6.9,6.2 10.5268,9.3158 20.7328,18.9881 30.6,29 l 2.8,2.8 c 4.6667,4.4667 9.0333,9.1333 13.1,14 2.4667,2.6667 5,5.2667 7.6,7.8 3.8334,3.7398 7.5035,7.6435 11,11.7 l 8.5,9.3 c 8.3414,8.7251 16.3472,17.765 24,27.1 l 23.1,27.3 4.2,5 c 7.7094,8.9128 15.277,17.9473 22.7,27.1 l 10,12 c 7.3559,8.9547 14.8569,17.7892 22.5,26.5 l 2.1,2.4 c 11.5452,13.5231 28.0584,21.8158 45.8,23 13.7197,-0.4934 26.7802,-6.0094 36.7,-15.5 23.9,-26 34,-63.3 38,-97.6 l 1.4,-9.1 c 3.2,-21 3.4,-42.5 3.6,-63.7 l 0.1,-10.7 0.3,-20.8 3.8,2.8 2,1.6 c 3.3333,2.5333 6.5333,5.2 9.6,8 6.8504,6.0905 13.9218,11.9277 21.2,17.5 7.6,6.2667 15.3333,12.4 23.2,18.4 l 13,10.1 c 7.9333,6.1333 15.9333,12.1333 24,18 l 7.8,5.8 16.9,12 2,1.4 c 21.8705,15.2075 44.2852,29.6169 67.2,43.2 19.8,11.8 40,23.2 62.3,29.2 l 2.2,0.6 c 7.1377,1.6732 14.4892,2.2465 21.8,1.7 16.3372,0.061 32.079,-6.1288 44,-17.3 l 1.9,-1.5 c 18.3,-16.4 25.3,-46.4 29.8,-69.5 l 0.6,-3.1 c 3.2403,-17.5375 4.5481,-35.3774 3.9,-53.2 0,-12.2667 -0.4,-24.5 -1.2,-36.7 3.5333,3.4667 7,7.0667 10.4,10.8 l 1.4,1.6 9.3,10.5 10,11 5.6,6 c 5.4,6 10.9667,11.8333 16.7,17.5 2.8667,2.8 5.6,5.7 8.2,8.7 3.3333,3.8 6.9,7.3333 10.7,10.6 l 10.4,10 c 5.294,5.3584 10.8685,10.4322 16.7,15.2 13.874,12.2669 28.1484,24.0733 42.8,35.4 11.2448,8.8628 22.8904,17.2049 34.9,25 27.8,18.6 61.3,31.5 95.2,25.6 17.0449,-3.8777 32.7916,-12.1128 45.7,-23.9 l 2.3,-1.9 c 39,-32.4 51.9,-91.1 62.7,-138.1 2,2.5333 3.7333,5.2 5.2,8 l 1.2,2.4 1.3,2.6 1.4,2.7 16.9,33.3 1.4,2.7 c 11.0979,21.7409 21.6676,43.7473 31.7,66 15.7333,34.8 30.6667,69.9667 44.8,105.5 20.6,52.3 20.6,52.3 43.1,103.8 l 1,2.4 c 2.7796,6.0979 7.5852,11.0449 13.6,14 2.8,0.6667 5.6,1.2 8.4,1.6 0.074,11.4709 -0.1589,22.9417 -0.7,34.4 l -0.7,16.3 c -2.8591,69.0962 -8.1289,138.0715 -15.8,206.8 l -0.3,3.1 c -1.6746,14.4433 -3.6751,28.847 -6,43.2 l -2.3,15.5 c -5.4272,37.7714 -11.8964,75.3857 -19.4,112.8 l -0.4,2.3 c -10,48.4 -23,96.4 -37.4,143.6 l -1,3 c -15.1929,50.1183 -33.5634,99.2178 -55,147 l -1.3,2.8 c -15.5051,35.4144 -33.1029,69.8752 -52.7,103.2 l -1.8,3 c -21.9342,37.7646 -47.2728,73.4463 -75.7,106.6 -5.7429,7.0201 -11.7817,13.7929 -18.1,20.3 -6.5612,7.1636 -13.2965,14.1657 -20.2,21 l -2.6,2.7 c -4.4667,4.4667 -9.0667,8.7667 -13.8,12.9 -2.4667,2 -4.8333,4.1333 -7.1,6.4 -50.2,45.6 -111.1,79 -173.7,104.1 l -2,0.8 c -82.2512,32.4714 -169.2748,51.2207 -257.6,55.5 -52.2345,2.8669 -104.5931,2.6332 -156.8,-0.7 -7.5333,-0.4667 -15.0667,-0.8 -22.6,-1 -8.4667,-0.4 -16.9,-1.0667 -25.3,-2 -5.6,-0.6667 -11.1667,-1.2333 -16.7,-1.7 -29.1888,-2.3081 -58.2538,-5.9788 -87.1,-11 -38,-6 -75.4,-15.3 -111.9,-26.9 l -2,-0.7 c -50.8136,-16.5342 -99.2807,-39.5577 -144.2,-68.5 -28.861,-18.0114 -56.3978,-38.0625 -82.4,-60 -11.1333,-8.9333 -21.9333,-18.2 -32.4,-27.8 l -1.5,-1.4 c -8.3379,-7.6528 -16.5066,-15.488 -24.5,-23.5 l -2.7,-2.6 c -6.0969,-6.0549 -11.9034,-12.3954 -17.4,-19 -8.0709,-9.1244 -15.7769,-18.5652 -23.1,-28.3 -6.7204,-8.6181 -13.0598,-17.5267 -19,-26.7 -7.5427,-11.3232 -14.8115,-22.8266 -21.8,-34.5 l -1.5001,-2.5 c -9.8639,-17.0074 -19.1361,-34.3511 -27.8,-52 -26,-50.9 -45.7,-105.1 -62.7,-159.5 l -0.7,-2.2 c -14.6,-46.6 -26,-94.2 -37.8,-141.5 l -0.7,-2.8 c -18.4,-73.6 -18.4,-73.6 -23,-95.3 l -5.4,-25.5 c -9.8,-43 -17.6,-86.5 -25,-130 -1.1965,-6.9257 -2.5301,-13.8271 -4,-20.7 -0.4,-3 -0.4,-3 0.6,-6 l 1.4,1.3 c 13.4214,13.3793 29.2264,24.1307 46.6,31.7 l 2.7,1 c 10,3 21.6,2 30.9,-2.6 12.5,-7.3 18.4,-20.5 22,-34 10.4,-43.3 5,-92.2 2.7,-136.3 l -1,-19.6 c -1.7753,-37.5841 -3.8754,-75.1522 -6.3,-112.7 -5.2,-83.5 -10.2,-167.2 -9,-250.8 v -3 c 0.1893,-15.0371 0.556,-30.0715 1.1,-45.1 0.8635,-26.3807 2.5643,-52.7273 5.1,-79 2.2,-25.5333 5.2667,-50.8667 9.2,-76 l 0.3,-2 c 16.4,-103 16.4,-103 23.3,-109.9"
     fill="#fedfd5"
     data-index="3"
     style="opacity:1"
     id="path2" />
  <path
     d="m 1677.0296,503.79779 c 16.4,12 23.1,33.5 27.3,52.5 l 0.5,2.1 a 265,265 0 0 1 3.7,52.6 v 3.8 c -0.2,56.4 -10,112.1 -21,167.3 q -2,9.5 -3.4,18.9 l 1.7,-0.8 a 936,936 0 0 1 62.3,-25.2 l 2.1,-0.8 c 48.1,-18 97.8,-31.4 147.9,-42.2 l 2.7,-0.6 a 1357,1357 0 0 1 84,-15.2 c 28.2,-4.4 28.2,-4.4 42.3,-5.7 l 9.6,-1.5 a 257,257 0 0 1 24.8,-2.8 4544,4544 0 0 1 73.3,-6 l 2.5,-0.2 19.2,-1.1 c 20.7,-1.3 41.5,-1 62.2,-1 h 15.8 a 1381,1381 0 0 1 111.7,3.6 q 6,0.3 11.9,1.5 l 8.2,0.7 2.4,0.2 17.2,1.4 2.3,0.2 q 5.5,0.4 10.9,1.5 l 6.6,0.6 4,0.4 2,0.2 c 10.7,1 21.3,2 31.8,4 q 7.3,1.3 14.6,2.1 a 963,963 0 0 1 39.6,6.3 c 95.4,16.6 190.3,42.5 347,115.3 l 6.8,3.2 c 72.7,35.7 72.7,35.7 82.8,64.2 a 49,49 0 0 1 -4.9,36.5 c -19.9,28.9 -56.3,44 -87.3,57.3 l -5.6,2.5 c -20.4,9.20001 -41.7,16.80001 -62.8,24.50001 l -22.8,8.5 -2.7,1 c -4.1,1.6 -4.1,1.6 -8.1,3.3999 l 8.2,6.4 2.5,2 14,10.7 a 840,840 0 0 1 25.3,20.3 949,949 0 0 1 44,38.1 1103,1103 0 0 1 28.8,26.2 1014,1014 0 0 1 58.7,58.8 182,182 0 0 1 10.7,11.4 l 6.7,7.4 q 6,6.7 11.7,13.8 l 8.3,9.7 q 7.4,8.7 14.3,17.7 l 7,8.8 a 834,834 0 0 1 26.3,34.4 1385,1385 0 0 1 39.8,57 l 1.6,2.5 q 16.3,24.3 31.3,49.2 l 1.1,1.8 a 1442,1442 0 0 1 25.7,44.3 1381,1381 0 0 1 27.4,51 903,903 0 0 1 36.9,75.6 930,930 0 0 1 32.5,78.1 1346,1346 0 0 1 53.5,189.7 q 4.7,21.3 8.6,42.8 l 0.7,3.5 a 57,57 0 0 1 -5,40.3 40,40 0 0 1 -23.6,16.5 c -44,2.6 -76.2,-26 -107.2,-53.4 l -12,-11 -6.8,-6.1 -12,-10.8 -15,-13.7 -0.3,2.4 q -7.3,54.6 -19.5,108.3 l -0.7,3.1 a 472,472 0 0 1 -7.6,30.3 q -1.6,5.2 -2.8,10.3 c -17.5,70.3 -45.2,180.7 -97.1,232.6 l -0.6,5.6 -0.2,3 -0.2,2.4 2.4,-0.1 c 16.4,-0.4 32,2.9 47.6,8.1 l 2.3,0.8 c 28.7,9.6 52.3,26.5 74.3,47 l 2,1.8 q 6.5,6.3 12.4,13.4 l 1.6,1.9 c 52.1,61.4 74.6,158.6 69.2,238.1 a 336,336 0 0 1 -72.8,182 l -2.2,2.7 -6.8,8.3 -1.4,1.6 a 255,255 0 0 1 -38,38.3 l -7,6 a 372,372 0 0 1 -84.6,54.1 l -2.4,1.1 c -19.9,9.4 -40,17.8 -61,24 l -2,0.6 a 99,99 0 0 1 -22.6,4.3 l -0.5,2 q -2.5,9.6 -5.8,19 l -0.9,2.7 -3,9 -1.1,3.1 a 1381,1381 0 0 1 -37.7,98.2 l -0.8,1.9 q -7.4,17.8 -16.2,35.1 -3.5,7 -6.9,14.3 -6.5,13.7 -13.7,27 l -4.7,8.9 a 827,827 0 0 1 -23.7,41.8 l -1.7,2.8 a 783,783 0 0 1 -58.3,84.2 l -1.6,2 a 686,686 0 0 1 -33.7,39.6 q -8.7,9.9 -18.2,19 l -5.8,5.9 q -9,9.1 -18.7,17.5 l -5.1,4.8 q -7.9,7 -16.2,13.4 -4.6,3.4 -9.1,7.2 a 630,630 0 0 1 -160.6,91.6 l -2.4,1 a 852,852 0 0 1 -257.9,57.8 l -9.4,0.7 a 929,929 0 0 1 -69.5,1.8 h -16.3 a 1516,1516 0 0 1 -115,-4 l -3.5,-0.3 q -27.8,-2 -55.3,-5 l -3.4,-0.4 q -21.1,-2.4 -42.3,-5.6 l -2.2,-0.3 c -83.2,-12.6 -167.2,-36 -241.4,-76.4 l -7.6,-4 a 598,598 0 0 1 -44.9,-26.9 817,817 0 0 1 -43.9,-30.4 l -2.4,-1.8 a 892,892 0 0 1 -74.7,-61.3 l -5.5,-5 q -7.7,-6.9 -15,-14.3 l -2.7,-2.8 q -7,-6.7 -13.1,-14 l -7.5,-8.1 a 267,267 0 0 1 -18,-21.3 564,564 0 0 1 -46.1001,-66.4 l -1.2,-2 -7.8,-13 -1.6,-2.7 a 855,855 0 0 1 -61.4,-127.3 l -1.2,-3 a 1127,1127 0 0 1 -31.8,-92 l -1.9,0.2 c -41.4,5.3 -85.7,10.8 -127.1,2.8 l -3.1,-0.6 a 232,232 0 0 1 -119.59999,-61.6 q -7.1,-6.4 -13.9,-13.2 l -2.4,-2.5 c -48,-48.1 -76.5,-112.5 -87,-179.1 l -0.5,-3.3 q -1.9,-11.9 -3.5,-23.7 l -0.4,-2.7 a 280,280 0 0 1 61.4,-212.3 l 2.3,-2.9 a 232,232 0 0 1 41.2,-40 c 19.6,-16.1 41.99999,-30.2 65.49999,-40.1 a 58,58 0 0 0 -7.6,-14.2 l -1,-1.8 a 935,935 0 0 1 -23.39999,-40 l -1.6,-3 a 644,644 0 0 1 -40.4,-84 l -1.4,-3.6 a 734,734 0 0 1 -37.6,-152.4 l -0.3,-2.3 q -1.8,-12.6 -2.5,-25.1 c -0.1,-3.5 -0.1,-3.5 -0.7,-6.4 -1,-5.8 -1.1,-11.6 -1.5,-17.4 l -0.2,-3.7 -0.8,-13.1 -0.1,-2.7 c -1.1,-21.1 -1,-42.3 -1,-63.5 v -15 q -0.2,-34 1.1,-67.8 l -2,2.2 q -10.9,12 -22.5,23.2 -6.7,6.7 -12.9,13.8 a 97,97 0 0 1 -8,7.7 279,279 0 0 0 -11.4,11 227,227 0 0 1 -38.9,31.2 c -15.3,10 -31.5,16.5 -50.2,13.4 a 44,44 0 0 1 -25.5,-17.6 80,80 0 0 1 -8.2,-40.7 v -2.5 a 180,180 0 0 1 6.7,-47.4 q 14.1,-60.1 34.9,-118.3 l 0.7,-2 a 1257,1257 0 0 1 82.4,-180.8 932,932 0 0 1 22.7,-40 l 8.7,-14.6 1,-1.9 q 10.1,-17.3 21,-34.3 l 7,-11.2 a 1732,1732 0 0 1 33.3,-51.7 l 1.4,-2 a 2020,2020 0 0 1 107.99999,-150.2 l 4.4,-5.2 a 57,57 0 0 0 13.2,-27.1 q 1.6,-6.7 3.4,-13.3 l 0.7,-2.7 q 3.5,-13.5 7.8,-26.6 l 0.8,-2.2 a 991,991 0 0 1 45.5,-112.1999 l 1.4,-3 a 747,747 0 0 1 42.6,-77.70001 862,862 0 0 1 25.1,-40 866,866 0 0 1 53.6,-73.7 l 5,-6.4 a 544,544 0 0 1 38.8,-45.2 c 14.8,-16.5 14.8,-16.5 22.2,-23.7 l 5.3,-5.7 q 7.3,-8.2 15.2,-16 l 5.2,-5.1 q 7.7001,-7.9 15.9001,-15 4.3,-3.9 8.2,-8 6,-6.2 12.4,-11.7 5.2,-4.6 10.1,-9.3 a 441,441 0 0 1 20.8,-18.9 q 6.7,-6 13.5,-11.4 3.8,-3 7.5,-6.6 6.6,-6 13.8,-11.4 6,-4.6 11.7,-9.6 8.4,-7 17.3,-13.7 7.2,-5.5 14.2,-11.1 7.8,-6.2 15.7,-12.2 l 11.1,-8.4 q 11,-8.4 22,-16.4 l 15.2,-11.1 a 1291,1291 0 0 1 30.4,-22.3 c 57.5,-41.3 57.5,-41.3 89.7,-21.6 m -65.9,59.2 -2.4,1.8 -14.2,10.5 -11.9,8.7 -14.4,10.6 a 2067,2067 0 0 0 -104.2,81.8 l -9.2,7.8 a 576,576 0 0 0 -21.6,19.2 q -5.9,5.2 -11.5,10.4 l -9.3,8.5 a 1034,1034 0 0 0 -45.7,44 l -8.3,8.3 -2.5,2.5 q -6.5001,6.3 -12.3001,13.1 l -5,5.3 q -4.4,4.5 -8.6,9.3 l -6.3,7 q -5.7,6.5 -11,13.2 l -9,10.4 a 337,337 0 0 0 -19.9,24.8 l -1.7,2.2 -3.4,4.3 a 680,680 0 0 0 -36.2,51.6 q -11.5,17.1 -22.4,34.7 l -1.4,2.3 a 1092,1092 0 0 0 -49.3,90.49991 l -4.5,10 a 449,449 0 0 0 -13.3,31.4 755,755 0 0 0 -38.4,117.5 37,37 0 0 1 -11.1,18.3 l -3.7,4.6 -7,8.8 a 983,983 0 0 0 -25.8,33 563,563 0 0 0 -19.5,26.3 q -4.6,6.8 -9.6,13.4 a 958,958 0 0 0 -20,28.6 2613,2613 0 0 0 -41.39999,62.3 l -1.6,2.4 -9.4,14.6 -1.6,2.4 a 1937,1937 0 0 0 -80.4,137 1023,1023 0 0 0 -49.9,106 l -3.5,7.8 q -4.8,10.7 -8.6,21.8 l -8.6,23.3 a 320,320 0 0 0 -10,30.2 l -10.4,35.5 -0.8,2.8 a 634,634 0 0 0 -14,57 164,164 0 0 0 -2.2,37.2 c 3.2,1 3.8,1.1 7,-0.3 a 206,206 0 0 0 44,-34.8 l 5.5,-5 a 278,278 0 0 0 19.1,-18.4 259,259 0 0 0 13.8,-14.7 q 4.2,-4.5 8.6,-8.8 a 201,201 0 0 0 12.3,-13 q 3.2,-3.7 6.7,-7 a 169,169 0 0 0 13.7,-14.8 c 4.6,-5 7.6,-10.1 10.5,-16.3 l 2.9,-6 1.4,-3 a 699,699 0 0 1 35.4,-62.2 l 1.5,-2.4 c 4,-6 8.6,-11 15.6,-13.3 a 28,28 0 0 1 18,3 c 4.2,3.9 7.7,8.1 8.3,14 v 6.6 c -0.8,8.2 -5.8,14.8 -10,21.6 a 851,851 0 0 0 -17.5,29.4 l -1.6,2.8 -5.6,9.9 c -21,36.7 -11,109.5 -11,150.2 v 15 c -0.5,57.7 -0.5,57.7 5.8,115.1 q 1,5.7 1.6,11.4 a 567,567 0 0 0 60.39999,195.7 742,742 0 0 0 28.9,52 925,925 0 0 0 25.9,41.7 351,351 0 0 0 29.8,38.6 l 1.9,2.2 q 10.5,12.3 22.2,23.8 l 5,5.6 q 6.9,7.6 14.3,15 l 2.8,2.7 q 6.8,6.9 14,13.2 3.7,3 7.1,6.4 6.7,6 13.6,11.6 l 7,5.8 q 10.9,9.2 22.5,17.6 l 2.2,1.5 c 3.4,2.7 3.4,2.7 7.4,3.6 7.7,-17 4.4,-40.6 4.4,-58.9 v -2.6 a 2163,2163 0 0 0 -4.7,-131 l -5.4,-87 a 4475,4475 0 0 1 -5.5,-107.4 1886,1886 0 0 1 0.5,-206.7 1257,1257 0 0 1 7.4,-83.7 901,901 0 0 1 19.2,-116 532,532 0 0 1 9.7,-40.6 l 3,-11.3 c 1.6,-6 1.6,-6 0.4,-11.8 -2.5,-2.1 -2.5,-2.1 -5.8,-4 l -1.8,-1 -15,-8.9 q -6,-3.3 -11.6,-6.9 l -2.6,-1.6 a 22,22 0 0 1 -8.2,-11.6 c -0.5,-7 0,-13.4 3.5,-19.6 a 27,27 0 0 1 17,-8 c 9.8,0.9 18.3,6.6 26.6,11.5 l 5.4,3.2 a 994,994 0 0 1 56.8,36.4 l 22.7,15.2 q 18.5001,12.5 37.8001,23.8 15.2,9 30.3,18.7 l 12,7.5 14.9,9.3 2.8,1.7 a 1646,1646 0 0 1 55.4,36.4 l 11.8,7.8 q 20.2,13.4 40,27.5 l 17.6,12.7 q 11.3,8 22.4,16.4 l 7.7,5.8 37.7,28.4 q 11,8.3 21.7,17.2 l 10.8,8.5 a 811,811 0 0 1 52,44 q 8.6,7.6 17.1,15.6 l 2,1.9 c 26,24.2 26,24.2 35.3,35.2 l 6.7,6.9 q 5.2,5.1 10,10.7 l 8.4,9.1 q 6.9,7.5 13.3,15.4 l 8.3,9.3 q 6.6,7 12.6,14.6 l 8.8,10.3 a 1134,1134 0 0 1 32.2,38.2 q 4.8,5.6 9.4,11.4 10.6,13.3 22,25.8 l 4,4.8 q 2.7,3.3 6.1,5.7 l 2.1,1.5 c 3.4,2.3 5.7,2.6 9.8,2.2 16.9,-11.9 22.5,-41.3 26,-60 l 1,-4.4 c 10.2,-48.4 13,-109.2 -5,-155.6 l -1.2,-3.2 c -7.2,-18.9 -15.3,-37 -25.6,-54.4 -11,-18.8 -11,-18.8 -9.2,-28.4 a 24,24 0 0 1 12.6,-14.2 c 7,-1.6 14.2,-2 20.4,1.7 7.6,5.7 12,15.3 16.4,23.4 l 1,1.8 c 13.5,24.6 13.5,24.6 17.3,36.7 3.6,9.3 14,16.7 21.4,23 l 6.5,5.8 14.2,12.4 10.4,9 q 6.3,5.7 12.8,11 l 9.8,8.3 q 7.8,6.6 15.8,12.9 l 13.5,10.8 a 671,671 0 0 0 24,18.8 c 80.5,67.5 80.5,67.5 174.9,98.6 9.2,-2.6 13.8,-8.2 18.5,-16.2 q 3.4,-6.6 5.6,-13.7 l 1,-3 q 3.3,-9.7 5.3,-19.6 l 0.5,-2.2 c 2.7,-14.8 2.3,-30 2.3,-45 v -3.1 a 332,332 0 0 0 -6.2,-68.2 l -0.4,-2.5 c -3,-17.2 -9.5,-32.6 -16.6,-48.5 l -1.2,-2.8 c -5.6,-12.5 -11.8,-24.8 -17.8,-37.1 l -5.2,-10.6 q -8.7,-18 -19.2,-35 c -13.6,-22.5 -13.6,-22.5 -11.6,-32.5 2.4,-6.7 6,-10.5 12,-14 6,-2 13.4,-2 19.3,0.4 8.6,5.3 13.4,15.9 18.3,24.5 l 1,1.8 a 979,979 0 0 1 21.4,40.3 l 1.6,3.2 a 433,433 0 0 1 13.8,28.7 106,106 0 0 0 17,27.1 l 6.2,7.8 11.5,14.5 q 7,9 14.6,17.7 4.5,5.1 8.7,10.4 a 697,697 0 0 0 30,34.5 q 9.6,11 19.9,21.4 2.4,2.4 4.6,5.1 7.1,8 14.9,15.5 l 5,5 q 7.4,7.6 15.5,14.6 l 7.5,6.9 q 7,6.3 14.3,12.2 l 9.7,8.3 a 471,471 0 0 0 24.6,19.8 c 19.2,15.3 39.3,30.1 62.6,38.3 l 3,1 a 58,58 0 0 0 37.4,-0.5 c 33.6,-19 47.6,-55.5 57.6,-90.8 q 3.9,-13.9 7,-28 1.5,-6.9 3.4,-13.8 2.7,-10 4.6,-20.3 2.3,-12 5.4,-24 c 4,-17.5 -7.5,-38.5 -15.5,-53.7 a 26,26 0 0 1 -1.8,-21.2 21,21 0 0 1 11.3,-10.8 c 5.5,-1.9 12,-1.8 17.5,0.3 18.5,10.7 25.8,43.1 31.4,62.3 q 1.2,4.5 2,8.9 c 2.1,11.5 8,20.7 14,30.6 l 8,14.4 1.5,2.9 q 7.2,13.3 14,26.7 l 1,2 q 6.4,12.3 12.4,24.5 l 6.5,12.3 c 5.4,9.8 10,20.1 14.6,30.4 l 6.4,13.8 q 12,25.4 23.3,51 l 1.4,3.2 a 2208,2208 0 0 1 34.3,84 q 8.6,21.7 17.7,43.1 l 6.6,15.7 c 19,-22.3 32.3,-53.4 44,-80 l 1.5,-3.3 q 9.3,-21.2 17.6,-42.9 l 0.8,-2.2 a 426,426 0 0 0 7.3,-20.3 l 3.3,-9 a 560,560 0 0 0 14.8,-46.7 l 3.1,-10.2 q 8.2,-25.6 13.2,-51.8 1.4,-7 3.3,-13.7 3.7,-15.8 6.2,-31.8 l 5.5,-32.4 a 483,483 0 0 0 4.4,-28.7 l 0.3,-2.4 a 79,79 0 0 0 -10.3,-53.6 l -1.1,-2.1 c -4.1,-7.6 -8.3,-14.9 -13.5,-21.8 a 21,21 0 0 1 -3.4,-16.1 27,27 0 0 1 11,-15 q 8.8,-4 18.2,-1.4 c 12.5,5.5 19,20.8 24.8,32.2 l 1.6,3 3,6 a 57,57 0 0 0 16.5,20.5 482,482 0 0 1 29.7,25.8 q 5.4,5.2 11.1,10 l 8.6,7.9 12.5,11.2 7.3,6.7 q 6.7,6 13.8,11.7 l 6.2,5.3 a 209,209 0 0 0 23.7,18.1 q 1.4,1 3.2,2 c 6,3.9 10.6,5.9 17.8,6 a 149,149 0 0 0 -5.2,-33.9 l -0.4,-1.9 -6,-27.9 c -2,-9 -4,-18 -6.5,-27 a 733,733 0 0 1 -6.3,-25.1 544,544 0 0 0 -14.4,-51.6 q -2,-5.7 -3.4,-11.4 -4.5,-14.7 -9.7,-29 l -4.8,-14.6 q -2.7,-7.9 -6,-15.6 -4.1,-10.2 -7.6,-20.6 a 216,216 0 0 0 -11.7,-27.9 l -1.4,-3 -9.9,-21.8 c -8.4,-18.9 -8.4,-18.9 -17.5,-37.4 l -4.4,-8.7 q -9.6,-19.5 -20,-38.5 l -6.5,-12.2 q -7.2,-13.7 -15.1,-27 -5.4,-9 -10.3,-18.2 -6.5,-11.6 -13.8,-22.8 l -9.7,-15.5 a 1498,1498 0 0 0 -49.4,-74.4 l -1.8,-2.5 -4.8,-6.6 -1.8,-2.3 -14,-18.7 -2,-2.5 a 891,891 0 0 0 -29.5,-36.6 q -4.4,-5.1 -8.7,-10.4 -5.9,-7.1 -12,-13.9 -3,-3 -5.8,-6.4 a 662,662 0 0 0 -16,-17.7 977,977 0 0 0 -37.7,-38.7 l -5,-5 -2.4,-2.3 q -6.1,-6.1 -12.7,-11.8 l -5.3,-5.1 q -4.5,-4.4 -9.3,-8.6 -3.6,-3 -7,-6.3 -1.5,-1 -2.6,-2.3 l -5,-4.6 q -7.7,-6.8 -15.6,-13.2 l -10.2,-8.7 a 690,690 0 0 0 -45.3,-36.3 527,527 0 0 0 -26.5,-19.7 q -3.9,-2.6 -7.6,-5.6 a 50,50 0 0 0 -25.3,-10.8 l -6,-1.3 c -9.8,-2 -19.3,-2.5 -29.2,-2.5 -8,0 -14.9,-1.8 -20.9,-7.4999 -5,-5.5 -5.4,-10.4 -5.3,-17.8 0.6,-6.3 3.8,-10.2 8.5,-14.2 5.8,-4.30001 11.9,-3.30001 19,-3.30001 h 2 c 12.1,0 23.8,0.40001 35.5,3.90001 19,5.3 31.5,1 48.7,-6.50001 q 14.2,-5.9 28.7,-11 c 75.6,-23.8 75.6,-23.8 140.9,-66.2 1.2,-2.6 1.2,-2.6 2,-5 a 110,110 0 0 0 -25,-18 l -2.3,-1.3 a 807,807 0 0 0 -68.5,-34.4 l -15.6,-7.5 q -8.7,-4.5 -17.7,-8.2 -6.4,-2.8 -12.7,-5.9 c -23.5,-11 -48,-19.5 -72.5,-28 l -12,-4.3 q -13.2,-4.9 -26.9,-8.4 l -13.8,-4 a 1063,1063 0 0 0 -69.9,-17.5 q -10.8,-2.1 -21.6,-4.6 a 806,806 0 0 0 -70,-13 c -17.6,-3.3 -35.6,-5.2 -53.5,-7.3 l -12.4,-1.5 a 1161,1161 0 0 0 -136.7,-9.2 q -54.4,-0.6 -108.9,2 l -3,0.1 a 1610,1610 0 0 0 -270.8,38.1 q -15,3.3 -29.5,7.7 -5.5,1.6 -11,2.9 c -8.8,2 -17.2,5 -25.7,7.8 q -11.6,4 -23.4,7.3 -5,1.5 -9.7,3.4 l -8.7,3 q -8,3 -16,6.4 l -10.5,4 c -21.4,8 -21.4,8 -42.3,17.2 a 324,324 0 0 1 -17.6,7.9 l -13,5.6 a 13,13 0 0 0 -5.8,6.6 l -1.4,2.7 -1.4,2.9 c -10.2,20.9 -10.2,20.9 -15.6,30.2 l -1.2,2 a 26,26 0 0 1 -13.4,12.3 c -3.2,0.3 -3.2,0.3 -6.9,0.3 h -3.6 a 18,18 0 0 1 -11.3,-5 l -1.5,-1.7 -1.4,-1.8 c -2.8,-4 -3.6,-6.7 -3.6,-11.6 v -3 c 0.8,-7.8 5.7,-14.8 9.5,-21.5 a 281,281 0 0 0 14.8,-30.7 l 1.1,-2.8 c 6,-15.2 10,-30.2 12.9,-46.2 l 1.6,-8.6 7.3,-39.9 0.5,-2.6 1.9,-10 a 668,668 0 0 0 7,-44.6 c 5.2,-40.6 9.3,-84.6 -0.7,-124.7 l -0.5,-2.3 a 33,33 0 0 0 -7.1,-14.3 c -14,0 -29.2,14.1 -40,22 M 1294.1295,1646.9977 q -3.4,8.9 -5.5,18.1 l -0.6,3 -2.2,9.5 -0.7,3.3 a 1109,1109 0 0 0 -12.8,66.7 c -4.5,26.4 -7.6,52.8 -10.2,79.4 l -0.3,3 a 1407,1407 0 0 0 -5.7,89 v 2.6 a 1904,1904 0 0 0 -1.1,46.4 c -0.8,48.2 1.6,96.4 3.7,144.5 l 0.8,18 q 2.5,56.2 6.4,112.6 a 2868,2868 0 0 1 4.7,84.2 l 0.1,3 1,19.7 c 6.6,129.4 6.6,129.4 -15.7,158.3 a 36,36 0 0 1 -22.7,11 c -23.3,0.5 -38.9,-11 -56.2,-25.3 l -8.9,-7.3 c -2,-1.7 -2,-1.7 -4.1,-2.7 q 2.3,15 5,30.2 l 0.4,2.5 q 7,39.2 14.6,78.3 l 0.6,3 a 2039,2039 0 0 0 18.7,86.5 q 7.5,32.7 15.6,65 l 0.8,3.1 c 15.3,61.6 30.6,123 50.3,183.4 l 1.2,3.8 a 897,897 0 0 0 66.8,155.9 590,590 0 0 0 58.0001,90.3 l 2.3,3 6.7,8 1.3,1.6 q 8.2,9.8 16.7,19.4 l 2.3,2.6 a 605,605 0 0 0 21,21.8 l 1.4,1.4 q 7.4,7.6 15.5,14.7 3.9,3.3 7.6,6.9 7,6.4 14.4,12.3 3.7,3 7.3,6.2 10.4,8.7 21,16.7 4.4,3.3 8.6,6.7 c 71.3,57 156.4,97.5 266.9,125.3 l 6,1.3 a 823,823 0 0 0 73.9,13.2 c 19.6,3 39.4,4.6 59.1,6.2 l 3.7,0.4 12.6,1 5.6,0.8 a 83,83 0 0 0 13.8,1 l 45.4,2 q 9.7,0.3 19.5,1 10.8,0.7 21.7,0.7 h 18.9 c 81.9,0 162.6,-7.8 339.8,-60.2 l 2,-0.8 a 624,624 0 0 0 82,-40.2 l 3.3,-2 a 376,376 0 0 0 35.8,-23.6 l 8.8,-6.3 a 332,332 0 0 0 25.3,-19.8 609,609 0 0 0 43.7,-40 l 2.7,-2.7 q 6.7,-6.7 12.9,-13.8 3,-3.7 6.4,-7.1 6,-6.7 11.8,-13.9 l 6,-7.2 a 554,554 0 0 0 50.3,-70.4 977,977 0 0 0 48,-84.2 l 1,-2 c 39.8,-79.8 69.6,-163.4 139.3,-484.3 l 1.7,-12.6 c 11,-76 15.6,-153 18.8,-229.8 v -2.4 l 0.8,-19.8 q 0.6,-13 0.4,-26.1 l -2,-0.3 a 27,27 0 0 1 -17.3,-10.2 c -3.8,-5.6 -6.2,-12 -8.9,-18.2 l -2,-4.7 q -8.2,-19.1 -16,-38.5 l -3.8,-9.6 -18.1,-45.4 a 1858,1858 0 0 0 -35.1,-83.6 l -2.4,-5.5 q -4.5,-10.6 -9.8,-20.7 l -4.8,-10.1 -1,-2 -0.8,-1.9 q -12.2,-26 -25.1,-51.7 l -1.4,-2.8 -16.3,-32 -1.2,-2.2 -1,-2 c -1,-1.8 -1,-1.8 -3,-3.6 l -0.9,3.7 c -13.4,55.6 -29.3,114.9 -79.8,148.2 a 95,95 0 0 1 -72.6,10.3 c -41.4,-10.2 -74.5,-38.3 -106.9,-64.7 l -5,-4 a 353,353 0 0 1 -21.7,-18.9 456,456 0 0 1 -24.6,-23.1 q -3,-3 -6.5,-6 -5.6,-5 -10.6,-10.7 -5.4,-6 -11.2,-11.5 a 190,190 0 0 1 -11.3,-12 q -4.1,-4.8 -8.4,-9.3 -10.7,-11.5 -20.7,-23.9 l -1.8,-2.1 h -1 l 0.2,3.1 a 620,620 0 0 1 1,41.9 228,228 0 0 1 -13.2,80 l -0.8,2.2 c -7.8,21 -18.8,38.2 -39.2,48.8 -23.1,9.7 -47.6,5.5 -70.1,-3.5 q -10.4,-4.4 -20.4,-9.8 l -2,-1 a 362,362 0 0 1 -25.4,-14.4 l -7.8,-4.7 a 941,941 0 0 1 -48.3,-31.6 l -2.9,-2 q -18.3,-12.6 -36.1,-26 l -1.8,-1.3 a 1317,1317 0 0 1 -47.2,-36.9 l -13.4,-10.5 q -7.3,-5.9 -14.1,-12 c -6.7,-7.1 -6.7,-7.1 -14.5,-11.3 v 2.1 c -0.5,59.7 -0.5,59.7 -2.4,81.2 l -0.2,2.1 q -0.8,10.2 -3,20.2 l -1.2,7.5 c -3.2,21 -8.7,41.8 -18.2,60.9 l -1.6,3.4 a 73,73 0 0 1 -41.3,38.5 51,51 0 0 1 -37.6,-5.3 137,137 0 0 1 -35.3,-32.8 l -7.7,-9.3 -12.2,-14.7 -9.2,-11 -8.5,-10.2 q -6,-7.3 -12.2,-14.4 l -9,-11 q -5.5,-6.4 -11.2,-12.7 -3.3,-3.7 -6.4,-7.7 -7.4,-9 -15.6,-17.4 l -6.7,-7.4 q -11.6,-13.5 -24.3,-25.8 -2.7,-2.7 -5.2,-5.7 -7.1,-8 -14.8,-15.4 l -5,-5 q -7.4,-7.6 -15.5,-14.6 l -8,-7.4 a 271,271 0 0 0 -15,-13 q -4,-3.1 -7.7,-6.6 a 357,357 0 0 0 -19.8,-16.6 1254,1254 0 0 0 -31.7,-25.3 q -9.4,-7.6 -19.1,-14.8 l -14,-10.7 a 957,957 0 0 0 -24.7,-18.3 l -13.9,-10.1 a 700,700 0 0 0 -23.5,-16.7 l -12.5,-8.8 a 1583,1583 0 0 0 -39.4,-26.6 3699,3699 0 0 0 -98.4,-62.6 l -3.4,-2 a 3596,3596 0 0 0 -49.3001,-29.7 l -1.9,-1 -9.2,-5.6 -1.8,-1.2 -4.9,-3 c -2.3,-1.7 -2.3,-1.7 -4.5,-1.5"
     fill="#0e1217"
     data-index="4"
     style="opacity:1"
     id="path3" />
  <path
     d="m 1057.1295,2375.9977 c 1.8,1.7 1.8,1.7 3.7,3.9 l 8.5,10.3 q 6.7,8.1 13.9,15.7 l 7.3,8 q 6.6,7.4 13.8,14.2 l 1.8,1.7 1.5,1.5 a 26,26 0 0 1 6,15.2 l 0.4,2.6 0.8,5.6 2.3,15.3 0.5,3.2 c 3,20.4 6.8,40.6 10.5,60.8 l 0.6,3.5 a 3128,3128 0 0 0 37.9,181.7 q 13,54.6 27.1,109 l 0.9,3.1 6.4,24.6 1,3.5 0.8,3.2 0.8,2.9 c 0.5,2.5 0.5,2.5 0.5,6.5 a 308,308 0 0 1 -62.5,5.3 h -9.2 c -18,0.1 -35.9,-1.4 -53.2,-5.9 l -3,-0.7 a 188,188 0 0 1 -68.1,-35.7 l -3,-2.4 a 290,290 0 0 1 -21.79999,-20.2 l -1.5,-1.4 a 194,194 0 0 1 -20.6,-23.7 322,322 0 0 1 -22.1,-33.3 l -1.2,-2 c -22.3,-37.4 -30.4,-83.4 -35.8,-126 l -0.3,-2.2 c -1,-7.4 -1,-14.9 -1,-22.3 v -2.2 a 260,260 0 0 1 3.6,-42.7 230,230 0 0 1 41.7,-99.6 l 1.2,-1.8 a 195,195 0 0 1 44.1,-44 l 5.4,-4 c 46.29999,-36.3 46.29999,-36.3 60.29999,-31.2 m 1897.0001,-74 c 44.4,2.8 79.3,23.5 108.9,56.2 22.6,26 36.6,59.1 44.5,92.3 q 0.7,3.3 1.7,6.6 c 5.8,22.4 9.3,45 11.9,67.9 l 0.3,2.8 c 6,59 -12,119.5 -43.3,169.2 l -1.2,2 a 248,248 0 0 1 -19.6,26.6 q -6.8,9.3 -15.2,17.4 -2.8,2.8 -5.4,5.9 a 168,168 0 0 1 -22.8,21.9 q -4.2,3.3 -8.3,7 c -8,6.7 -16.8,12.4 -25.5,18.2 l -2,1.3 -12,7.7 -2,1.2 a 333,333 0 0 1 -83,36.8 c 1.6,-9 4,-17.7 6.3,-26.5 15.3,-57 26.3,-114.8 36,-173 l 0.5,-3 c 15.2,-90.7 23.4,-182.9 30.2,-338.5"
     fill="#fedfd5"
     data-index="5"
     style="opacity:1"
     id="path4" />
  <path
     d="m 1679.7296,2281.5977 h 2 c 10.7,0 20.3,1 30.4,4.4 l 2,0.6 a 108,108 0 0 1 61.3,55.5 c 6.6,13.8 9,27 9,42.2 v 3.6 c 0,27.4 -11.9,52.2 -30.5,71.8 -22.7,21.8 -50.3,30 -81.2,29.6 a 79,79 0 0 1 -24.6,-4.3 l -1.9,-0.6 a 107,107 0 0 1 -60,-51.3 c -3.4,-6.8 -5.8,-13.9 -8.1,-21.1 l -1.1,-3.5 a 98,98 0 0 1 1.1,-49.5 l 1,-3.7 a 106,106 0 0 1 52.4,-62.6 100,100 0 0 1 48.2,-11"
     id="leftEye" />
  <path
     d="m 2407.1296,2279.2829 3.8,1.3 a 106,106 0 0 1 40.2,26.7 l 2,2 c 19.7,21.1 27,49 26.1,77.2 a 105,105 0 0 1 -33.3,69 c -25,21.6 -53.4,28.7 -85.8,26.8 a 83,83 0 0 1 -17,-4 l -3.3,-1 q -20.5,-7.3 -36.7,-22 l -2.3,-2 a 100,100 0 0 1 -30.9,-63.2 l -0.1,-10.5 v -3.8 a 99,99 0 0 1 26.3,-66.5 l 1.3,-1.5 a 106,106 0 0 1 109.7,-28.5"
     id="rightEye" />
  <path
     d="m 2014.1296,2463.5977 c 2.6,1.8 4.3,3.6 6,6.4 l 1.8,2.6 a 25,25 0 0 1 -1.5,20.7 l -7.6,15.9 -1,1.9 q -10.7,22.2 -21.9,44.3 a 2377,2377 0 0 0 -28,57.2 c -21.3,44.4 -21.3,44.4 -29.8,92.4 l -0.2,3.1 c -0.3,8.5 0,19.1 5.9,25.8 q 3,2 6.3,3.1 l 2.5,1 a 81,81 0 0 0 24.4,3.1 c 21,0.5 41.6,-3.3 61.8,-7.8 20.2,-4.5 20.2,-4.5 28.4,0.3 4.7,3.6 9.6,8.5 10.9,14.4 0.8,6.9 0.1,12.3 -4,18 -8.6,10.4 -23.2,11.7 -35.8,14 l -2,0.4 q -7.2,1.5 -14.2,2.6 l -3.2,0.6 c -13,2.2 -26,2.7 -39.2,2.8 h -2.3 c -24.2,0.2 -48.9,-4.8 -67.2,-21.5 -17.4,-19 -18.1,-45.6 -17.3,-70 2.7,-53 35.8,-106.1 59,-152.5 l 1,-2 16,-31.9 a 733,733 0 0 0 13.4,-28 c 3.7,-7.9 8.2,-16.4 16.6,-20 a 27,27 0 0 1 21.1,3"
     id="path9" />
  <path
     d="m 956.12951,2443.9977 1,2 c -1.4,2.6 -1.4,2.6 -3.5,5.8 l -2.2,3.6 -1.2,1.8 a 378,378 0 0 0 -40.7,90.6 l -0.7,2.2 -2.7,7 c -2.2,-6 0.6,-13 2,-19 l 0.5,-2 c 7.8,-34 26,-65 47.5,-92"
     fill="#b2d7f9"
     data-index="8"
     id="path7" />
  <path
     d="m 956.12951,2443.9977 1,2 c -1.3,2.5 -1.3,2.5 -3.1,5.4 l -1.8,3 c -2.2,2.7 -4,4 -7.1,5.6 q 2.7,-5.6 6.6,-10.2 l 1.3,-1.7 z"
     fill="#adcbe9"
     data-index="9"
     id="path8" />
	 
  <g id="mouth">
    <path id="mouth-closed" stroke="#333" stroke-width="2" fill="#280b0b"
       d="m 1750,2975 c 239.8434,97.0193 380.2504,101.5401 611.5467,-0.6567 10.4293,4.9022 19.9037,14.8794 3.1708,32.318 -235.8535,101.2633 -388.7959,100.9282 -627.7854,0 -9.1679,-11.4134 -7.0488,-26.5232 13.0679,-31.6613 z" />
    <path
       id="mouth-fv" stroke="#333" stroke-width="2" fill="#280b0b" style="display: none;"
       d="m 1703.3979,2971.0717 c 235.0872,60.7122 388.1774,64.4288 621.0591,-2.2421 10.4293,4.9022 16.7329,11.7086 0,29.1472 -229.5119,110.7757 -388.7959,100.9282 -627.7854,0 -9.1679,-11.4134 -13.3904,-21.767 6.7263,-26.9051 z" />
    <path
       id="mouth-narrow" stroke="#333" stroke-width="2" fill="#280b0b" style="display: none;"
       d="m 1703.3979,2981.0004 c 230.5184,28.7303 384.3027,37.3062 621.0591,-2.2421 10.4293,4.9022 16.7329,11.7086 0,29.1472 -229.5119,110.7757 -388.7959,100.9282 -627.7854,0 -9.1679,-11.4134 -13.3904,-21.767 6.7263,-26.9051 z" />
    <path
       id="mouth-open" stroke="#333" stroke-width="2" fill="#280b0b" style="display: none;"
       d="m 1703.3979,2981.0004 c 234.3184,-13.0692 388.9407,-13.7116 621.0591,-2.2421 10.4293,4.9022 16.7329,11.7086 0,29.1472 -229.5119,110.7757 -388.7959,100.9282 -627.7854,0 -9.1679,-11.4134 -13.3904,-21.767 6.7263,-26.9051 z" />
    <path
       id="mouth-wide" stroke="#333" stroke-width="2" fill="#280b0b" style="display: none;"
       d="m 2320.4113,2981.0004 c -226.7196,-51.0633 -379.6637,-60.0965 -621.0591,-2.2421 -10.4293,4.9022 -16.7329,11.7086 0,29.1472 229.5119,110.7757 388.7959,100.9282 627.7854,0 9.1679,-11.4134 13.3904,-21.767 -6.7263,-26.9051 z" />
  </g>
</svg>

	   
    </div>
    <div>
        <label for="avatar-select">Choose Avatar: </label>
        <select id="avatar-select" onchange="changeAvatar()">
            <option value="boy1" selected>Boy 1 (Spiky Hair)</option>
            <option value="boy2">Boy 2 (Curly Hair)</option>
        </select>
        <br>
        <label for="custom-svg">Upload Custom SVG: </label>
        <input type="file" id="custom-svg" accept=".svg" onchange="loadCustomSVG()">
        <p><small>Note: Custom SVGs must include a <g id="mouth"> with <path> elements for <code>mouth-closed</code>, <code>mouth-open</code>, <code>mouth-wide</code>, <code>mouth-narrow</code>, and <code>mouth-fv</code>.</small></p>
        <textarea id="speechText" placeholder="Enter text for the avatar to speak..."></textarea>
        <br>
        <button onclick="speak()">Make Avatar Speak</button>
    </div>

    <script>
        // Sample phoneme dictionary (50 words for brevity)
        let phonemeDict = {
            "the": ["DH", "AH"],
            "boy": ["B", "OY"],
            "hello": ["HH", "EH", "L", "OW"],
            "good": ["G", "UH", "D"],
            "morning": ["M", "AO", "R", "N", "IH", "NG"],
            "is": ["IH", "Z"],
            "a": ["AH"],
            "cartoon": ["K", "AA", "R", "T", "UW", "N"],
            "avatar": ["AE", "V", "AH", "T", "AA", "R"],
            "talking": ["T", "AO", "K", "IH", "NG"]
            // ... (sample subset; full 5k-word dictionary in phonemes.json)
        };

        // Load phonemes.json if available
        fetch('phonemes.json')
            .then(res => res.json())
            .then(data => phonemeDict = data)
            .catch(err => console.warn('Failed to load phonemes.json, using sample dictionary:', err));

        // Phoneme-to-viseme mapping
        const visemeMap = {
            "P": "closed", "B": "closed", "M": "closed",
            "F": "fv", "V": "fv",
            "TH": "open", "DH": "open",
            "T": "open", "D": "open", "S": "open", "Z": "open", "N": "open", "L": "open",
            "K": "open", "G": "open", "HH": "open",
            "AE": "open", "EH": "open", "IH": "open", "AH": "open",
            "AA": "wide", "AO": "wide", "ER": "wide",
            "IY": "wide", "EY": "wide", "AY": "wide", "OY": "wide",
            "UW": "narrow", "OW": "narrow", "AW": "narrow",
            "W": "narrow", "R": "narrow", "Y": "wide",
            "SH": "open", "ZH": "open", "CH": "open", "JH": "open"
        };

        // Phoneme durations (ms)
        const phonemeDurations = {
            "P": 60, "B": 60, "M": 60, "F": 70, "V": 70, "TH": 80, "DH": 80,
            "T": 60, "D": 60, "S": 70, "Z": 70, "N": 60, "L": 70,
            "K": 60, "G": 60, "HH": 50, "SH": 70, "ZH": 70, "CH": 70, "JH": 70,
            "AE": 120, "EH": 120, "IH": 120, "AH": 120,
            "AA": 150, "AO": 150, "ER": 140,
            "IY": 130, "EY": 140, "AY": 180, "OY": 180,
            "UW": 130, "OW": 180, "AW": 180,
            "W": 80, "R": 80, "Y": 80
        };

        // Improved G2P rules
        const g2pRules = {
            patterns: [
                { pattern: "ph", phonemes: ["F"] },
                { pattern: "tion", phonemes: ["SH", "AH", "N"] },
                { pattern: "sh", phonemes: ["SH"] },
                { pattern: "ch", phonemes: ["CH"] },
                { pattern: "th", phonemes: ["TH"] },
                { pattern: "a", phonemes: ["AE"] },
                { pattern: "e", phonemes: ["EH"] },
                { pattern: "i", phonemes: ["IH"] },
                { pattern: "o", phonemes: ["AA"] },
                { pattern: "u", phonemes: ["UH"] },
                { pattern: "b", phonemes: ["B"] },
                { pattern: "c", phonemes: ["K"] },
                { pattern: "d", phonemes: ["D"] },
                { pattern: "f", phonemes: ["F"] },
                { pattern: "g", phonemes: ["G"] },
                { pattern: "h", phonemes: ["HH"] },
                { pattern: "j", phonemes: ["JH"] },
                { pattern: "k", phonemes: ["K"] },
                { pattern: "l", phonemes: ["L"] },
                { pattern: "m", phonemes: ["M"] },
                { pattern: "n", phonemes: ["N"] },
                { pattern: "p", phonemes: ["P"] },
                { pattern: "r", phonemes: ["R"] },
                { pattern: "s", phonemes: ["S"] },
                { pattern: "t", phonemes: ["T"] },
                { pattern: "v", phonemes: ["V"] },
                { pattern: "w", phonemes: ["W"] },
                { pattern: "y", phonemes: ["Y"] },
                { pattern: "z", phonemes: ["Z"] }
            ]
        };

        // G2P fallback for missing words
        function g2p(word) {
            let phonemes = [];
            let remaining = word.toLowerCase();
            while (remaining.length > 0) {
                let matched = false;
                for (let rule of g2pRules.patterns) {
                    if (remaining.startsWith(rule.pattern)) {
                        phonemes.push(...rule.phonemes);
                        remaining = remaining.slice(rule.pattern.length);
                        matched = true;
                        break;
                    }
                }
                if (!matched) {
                    phonemes.push("AH");
                    remaining = remaining.slice(1);
                }
            }
            return phonemes;
        }

        // Get phonemes for text
        function getPhonemes(text) {
            const words = text.toLowerCase().split(/\s+/);
            const phonemes = [];
            for (let word of words) {
                if (phonemeDict[word]) {
                    phonemes.push(...phonemeDict[word]);
                } else {
                    phonemes.push(...g2p(word));
                }
            }
            return phonemes;
        }

        // Split text into sentences
        function splitSentences(text) {
            return text.match(/[^.!?]+[.!?]|\S+/g) || [text];
        }

        // Change avatar by fetching SVG file
        async function changeAvatar() {
            const select = document.getElementById('avatar-select');
            const avatar = document.getElementById('avatar');
            const avatarName = document.getElementById('avatar-name');
            const value = select.value;

            try {
                const response = await fetch(`${value}.svg`);
                if (!response.ok) throw new Error(`Failed to load ${value}.svg`);
                const svgText = await response.text();
                const parser = new DOMParser();
                const svgDoc = parser.parseFromString(svgText, 'image/svg+xml');
                const svgElement = svgDoc.querySelector('svg');
                if (!svgElement) throw new Error('Invalid SVG file');

                const innerContent = svgElement.innerHTML;
                if (!innerContent.includes('id="mouth"') ||
                    !innerContent.includes('id="mouth-closed"') ||
                    !innerContent.includes('id="mouth-open"') ||
                    !innerContent.includes('id="mouth-wide"') ||
                    !innerContent.includes('id="mouth-narrow"') ||
                    !innerContent.includes('id="mouth-fv"')) {
                    throw new Error('SVG must include a <g id="mouth"> with required mouth shapes');
                }

                avatar.innerHTML = innerContent;
                avatarName.textContent = value === 'boy1' ? 'Boy 1 (Spiky Hair)' : 'Boy 2 (Curly Hair)';
            } catch (err) {
                console.error('Error loading SVG:', err);
                alert(`Failed to load ${value}.svg. Please ensure the file is in the same directory.`);
            }
        }

        // Load custom SVG from file
        function loadCustomSVG() {
            const fileInput = document.getElementById('custom-svg');
            const avatar = document.getElementById('avatar');
            const avatarName = document.getElementById('avatar-name');
            const file = fileInput.files[0];

            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const svgContent = e.target.result;
                    const parser = new DOMParser();
                    const svgDoc = parser.parseFromString(svgContent, 'image/svg+xml');
                    const svgElement = svgDoc.querySelector('svg');
                    if (!svgElement) {
                        alert('Invalid SVG file!');
                        return;
                    }
                    const innerContent = svgElement.innerHTML;
                    if (!innerContent.includes('id="mouth"') ||
                        !innerContent.includes('id="mouth-closed"') ||
                        !innerContent.includes('id="mouth-open"') ||
                        !innerContent.includes('id="mouth-wide"') ||
                        !innerContent.includes('id="mouth-narrow"') ||
                        !innerContent.includes('id="mouth-fv"')) {
                        alert('Custom SVG must include a <g id="mouth"> with paths for mouth-closed, mouth-open, mouth-wide, mouth-narrow, and mouth-fv.');
                        return;
                    }
                    avatar.innerHTML = innerContent;
                    avatarName.textContent = 'Custom Avatar';
                };
                reader.readAsText(file);
            }
        }

        // Global animation frame ID and speaking flag
        let animationFrameId = null;
        let isSpeaking = false;

        // Animate mouth for a single sentence
        function animateMouth(phonemes) {
            const mouthGroup = document.getElementById('mouth');
            if (!mouthGroup) {
                alert('Avatar missing mouth group!');
                return;
            }
            const mouths = ['closed', 'open', 'wide', 'narrow', 'fv'].map(shape => document.getElementById(`mouth-${shape}`));
            if (mouths.some(mouth => !mouth)) {
                alert('Avatar missing required mouth shapes!');
                return;
            }

            // Reset mouth to closed
            mouths.forEach(mouth => mouth.style.display = 'none');
            mouths[0].style.display = 'block';

            let phonemeIndex = 0;
            let phonemeTime = 0;
            let startTime;
            
            function animateFrame(timestamp) {
                if (!isSpeaking) {
                    stopAnimation();
                    return;
                }

                if (!startTime) startTime = timestamp;
                const currentTime = timestamp - startTime;

                // Cycle phonemes if needed with precise reset
                if (phonemeIndex >= phonemes.length) {
                    phonemeIndex = 0;
                    phonemeTime = currentTime; // Align with current time
                }

                // Find current phoneme
                while (phonemeIndex < phonemes.length && phonemeTime <= currentTime) {
                    phonemeTime += phonemeDurations[phonemes[phonemeIndex]] || 80;
                    phonemeIndex++;
                }

                // Display appropriate viseme
                const displayIndex = Math.min(phonemeIndex, phonemes.length - 1);
                const phoneme = phonemes[displayIndex] || phonemes[phonemes.length - 1];
                const viseme = visemeMap[phoneme] || 'open';
                mouths.forEach(mouth => mouth.style.display = 'none');
                const targetMouth = mouths[['closed', 'open', 'wide', 'narrow', 'fv'].indexOf(viseme)];
                targetMouth.style.display = 'block';
                targetMouth.style.opacity = '1';

                animationFrameId = requestAnimationFrame(animateFrame);
            }

            // Start animation
            isSpeaking = true;
            animationFrameId = requestAnimationFrame(animateFrame);
        }

        // Stop animation immediately
        function stopAnimation() {
            isSpeaking = false;
            if (animationFrameId) {
                cancelAnimationFrame(animationFrameId);
                animationFrameId = null;
            }
            const mouths = ['closed', 'open', 'wide', 'narrow', 'fv'].map(shape => document.getElementById(`mouth-${shape}`));
            if (mouths.every(mouth => mouth)) {
                mouths.forEach(mouth => mouth.style.display = 'none');
                mouths[0].style.display = 'block';
            }
        }

        // Speak and animate sentence-by-sentence
        function speak() {
            const text = document.getElementById('speechText').value;
            if (!text) {
                alert('Please enter some text!');
                return;
            }
            if (Object.keys(phonemeDict).length === 0) {
                alert('Phoneme dictionary is still loading. Please try again in a moment.');
                return;
            }

            const sentences = splitSentences(text);
            let sentenceIndex = 0;

            function processSentence() {
                if (sentenceIndex >= sentences.length) {
                    stopAnimation();
                    return;
                }

                const sentence = sentences[sentenceIndex].trim();
                if (!sentence) {
                    sentenceIndex++;
                    processSentence();
                    return;
                }

                const phonemes = getPhonemes(sentence);
                const utterance = new SpeechSynthesisUtterance(sentence);
                utterance.lang = 'en-US';
                utterance.rate = 2.5;

                utterance.onstart = () => {
                    stopAnimation(); // Ensure previous animation is stopped
                    animateMouth(phonemes);
                };

                utterance.onend = () => {
                    stopAnimation(); // Stop immediately
                    sentenceIndex++;
                    processSentence();
                };

                speechSynthesis.speak(utterance);
            }

            processSentence();
        }
    </script>
</body>
</html>